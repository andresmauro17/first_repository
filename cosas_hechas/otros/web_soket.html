<!DOCTYPE html>
<html>
<head>
<style type='text/css'>
fieldset {
width:400px;
}

#debug {
height:70px;
width: 400px;
display: block;
}

#msg {
width: 160px;
height:40px;
float:left;
padding:20px;
}

#meter2 {
float:left;
width: 160px;
height:40px;
padding:20px 20px 20px 10px;
}
meter {
padding:0 5px 0 5px;
width:110px;
}
</style>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
<script>
    $(document).ready(function() {
/* Define handler for websocket debug information*/
    function debug(str) {
        $('#debug_txt').html('<p>'+str+'</p>');
        };
/* Create a websocket connection */     
ws = new WebSocket('ws://localhost:8080/echo');

/* Define websocket handlers */ 
      ws.onmessage = function(evt) {
                //set the text value
                $('#temp').text(evt.data);
                //set the value of the meter
                $('#meter').attr('value', evt.data);
                };
      ws.onclose = function() {
                debug('socket closed');
                };
      ws.onopen = function() {
                debug('connected...');
                ws.send('Hello.\n');
            };
});
</script>
</head>
<body>
    <fieldset><legend>Temperature Monitor</legend>

            <div id='meter2'>
        0&deg;
            <meter min='0' max='40' value='20' high='90' id='meter'>20</meter>
        40&deg;
        </div>

        <div id='msg'>The current temperature is <span id='temp'></span>&deg C</div>
    
    </fieldset>

    <fieldset id='debug'><legend>Debug:</legend><div id='debug_txt'></div></fieldset>
</body>
</html>
